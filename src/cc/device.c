/*
****************************************************************************************************
*       INCLUDE FILES
****************************************************************************************************
*/

#include "device.h"


/*
****************************************************************************************************
*       INTERNAL MACROS
****************************************************************************************************
*/


/*
****************************************************************************************************
*       INTERNAL CONSTANTS
****************************************************************************************************
*/


/*
****************************************************************************************************
*       INTERNAL DATA TYPES
****************************************************************************************************
*/


/*
****************************************************************************************************
*       INTERNAL GLOBAL VARIABLES
****************************************************************************************************
*/

static cc_device_t g_devices[CC_MAX_DEVICES];
static cc_dev_descriptor_t g_descriptors[CC_MAX_DEVICES];


/*
****************************************************************************************************
*       INTERNAL FUNCTIONS
****************************************************************************************************
*/


/*
****************************************************************************************************
*       GLOBAL FUNCTIONS
****************************************************************************************************
*/

cc_device_t *cc_device_new(const char *name, const char *uri)
{
    static int devices_count;

    if (devices_count >= CC_MAX_DEVICES)
        return 0;

    cc_device_t *device = &g_devices[devices_count];
    device->uri = string_create(uri);

    device->descriptor = &g_descriptors[devices_count];
    device->descriptor->label = string_create(name);
    device->descriptor->actuators = cc_actuators(0);

    devices_count++;

    return device;
}
