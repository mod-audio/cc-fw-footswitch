/*
************************************************************************************************************************
*       INCLUDE FILES
************************************************************************************************************************
*/

#include "assignment.h"
#include "device.h"


/*
************************************************************************************************************************
*       INTERNAL MACROS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL CONSTANTS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL DATA TYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL GLOBAL VARIABLES
************************************************************************************************************************
*/

static cc_assignments_t g_assignments;


/*
************************************************************************************************************************
*       INTERNAL FUNCTIONS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       GLOBAL FUNCTIONS
************************************************************************************************************************
*/

void cc_assignment_add(cc_assignment_t *assignment)
{
    if (!g_assignments)
        g_assignments = node_create(0);

    cc_actuator_map(assignment);
    node_child(g_assignments, assignment);
}

void cc_assignment_remove(int assignment_id)
{
    node_t *node;
    for (node = g_assignments->first; node; node = node->next)
    {
        cc_assignment_t *assignment = node->data;
        if (assignment_id == assignment->id)
        {
            node_cut(node);
            break;
        }
    }
}

cc_assignments_t cc_assignments(void)
{
    return g_assignments;
}
