/*
************************************************************************************************************************
*       INCLUDE FILES
************************************************************************************************************************
*/

#include "assignment.h"
#include "device.h"


/*
************************************************************************************************************************
*       INTERNAL MACROS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL CONSTANTS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL DATA TYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       INTERNAL GLOBAL VARIABLES
************************************************************************************************************************
*/

static cc_assignments_t *g_assignments = 0;


/*
************************************************************************************************************************
*       INTERNAL FUNCTIONS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*       GLOBAL FUNCTIONS
************************************************************************************************************************
*/

void cc_assignment_add(cc_assignment_t *assignment)
{
    if (!g_assignments)
        g_assignments = node_create(0);

    cc_actuator_map(assignment);
    node_child(g_assignments, assignment);
}

void cc_assignment_remove(int assignment_id)
{
    cc_assignments_t *assignments;
    for (assignments = cc_assignments(); assignments; assignments = assignments->next)
    {
        cc_assignment_t *assignment = assignments->data;
        if (assignment_id == assignment->id)
        {
            node_destroy(assignments);
            break;
        }
    }
}

cc_assignments_t *cc_assignments(void)
{
    if (g_assignments)
        return g_assignments->first;

    return 0;
}
